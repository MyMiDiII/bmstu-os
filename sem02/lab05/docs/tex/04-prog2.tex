\chapter{Вторая программа}

\vspace{-0.5cm}
\mylisting{testKernelIO.c}{}{Код второй программы. Один поток}{}

\img{1.3cm}{task021}{Результат работы второй программы. Один поток}{}

\clearpage
\mylisting{testKernelIOths.c}{}{Код второй программы. Два потока}{}

\img{1.3cm}{task022}{Результат работы второй программы. Два потока}{}

\vspace{-1cm}
\section*{Анализ результата}

В данной программе с помощью двух вызовов \texttt{open()} файл 'alphabet.txt'
дважды открывается только для чтения и создаются два дексриптора открытого
файла (им присваиваются значения 3 и 4). При этом создаются две различныи
структуры \texttt{struct file}, ссылающиеся на одну и ту же структуру
\texttt{struct inode}. Так как структуры \texttt{struct file} разные и их поля
\texttt{f\_pos} изменяются независимо, то для каждого файлового декскриптора
произойдет полное чтение файла и каждый символ будет выведен два
раза.

При многопоточной реализации алфавит также будет выведен два раза, однако
порядок вывода символов при этом неизвестен.

\img{10cm}{task0121}{Схема связей структур}{}
